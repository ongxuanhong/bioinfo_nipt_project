<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NIPT Patient Risk Summary Report</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Include Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Add Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .z-score-legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 3px;
        }
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">NIPT Portal</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link active" href="#">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Patient Reports</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Profile</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container mt-4">
        <!-- Previous patient information section remains the same -->

        <!-- Z-Score Analysis Section -->
        <div class="card mb-4">
            <div class="card-header">
                <h4>Z-Score Analysis</h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-8">
                        <div class="chart-container">
                            <canvas id="zScoreChart"></canvas>
                        </div>
                        <div class="z-score-legend">
                            <div class="legend-item">
                                <div class="legend-color" style="background: rgba(255, 99, 132, 0.2)"></div>
                                <span>High Risk Zone</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: rgba(75, 192, 192, 0.2)"></div>
                                <span>Normal Range</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>Chromosome</th>
                                        <th>Z-Score</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Chr 13</td>
                                        <td>0.8</td>
                                        <td><span class="badge bg-success">Normal</span></td>
                                    </tr>
                                    <tr>
                                        <td>Chr 18</td>
                                        <td>1.2</td>
                                        <td><span class="badge bg-success">Normal</span></td>
                                    </tr>
                                    <tr>
                                        <td>Chr 21</td>
                                        <td>0.9</td>
                                        <td><span class="badge bg-success">Normal</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    <div class="container mt-4">
        <!-- Patient Information Section -->
        <div class="card mb-4">
            <div class="card-header">
                <h4>Patient Information</h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>Patient ID:</strong> <span id="patientId">P12345</span></p>
                        <p><strong>Name:</strong> <span id="patientName">Jane Doe</span></p>
                        <p><strong>Age:</strong> <span id="patientAge">32</span></p>
                        <p><strong>Gestational Age:</strong> <span id="gestationalAge">12 weeks</span></p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>Test Date:</strong> <span id="testDate">2023-06-15</span></p>
                        <p><strong>Report Date:</strong> <span id="reportDate">2023-06-18</span></p>
                        <p><strong>Sample ID:</strong> <span id="sampleId">S789456</span></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Risk Summary Section -->
        <div class="card mb-4">
            <div class="card-header">
                <h4>Risk Assessment Summary</h4>
            </div>
            <div class="card-body">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Condition</th>
                            <th>Risk Level</th>
                            <th>Result</th>
                            <th>Reference Range</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Trisomy 21 (Down Syndrome)</td>
                            <td><span class="badge bg-success">Low Risk</span></td>
                            <td>1:10,000</td>
                            <td>&lt; 1:100</td>
                        </tr>
                        <tr>
                            <td>Trisomy 18 (Edwards Syndrome)</td>
                            <td><span class="badge bg-success">Low Risk</span></td>
                            <td>1:20,000</td>
                            <td>&lt; 1:100</td>
                        </tr>
                        <tr>
                            <td>Trisomy 13 (Patau Syndrome)</td>
                            <td><span class="badge bg-success">Low Risk</span></td>
                            <td>1:15,000</td>
                            <td>&lt; 1:100</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Additional Findings Section -->
        <div class="card mb-4">
            <div class="card-header">
                <h4>Additional Findings</h4>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <h5>Fetal Sex Determination</h5>
                    <p>Female</p>
                </div>
                <div class="mb-3">
                    <h5>Clinical Notes</h5>
                    <p>No additional abnormalities detected. Regular follow-up recommended.</p>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="row mb-4">
            <div class="col">
                <button class="btn btn-primary me-2">Download PDF</button>
                <button class="btn btn-secondary me-2">Print Report</button>
                <button class="btn btn-info">Share Report</button>
            </div>
        </div>

        <!-- Disclaimer -->
        <div class="alert alert-warning">
            <h5>Important Notice:</h5>
            <p>This is a screening test and not diagnostic. Results should be interpreted in conjunction with other clinical findings and diagnostic testing. Genetic counseling is recommended for detailed result interpretation.</p>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-light text-center text-muted py-3 mt-4">
        <p>Â© 2023 NIPT Portal. All rights reserved.</p>
    </footer>

    <!-- Include Bootstrap JS and dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Z-Score Chart Configuration
        const ctx = document.getElementById('zScoreChart').getContext('2d');
        const zScoreChart = new Chart(ctx, {
            type: 'scatter',
            data: {
                datasets: [
                    {
                        label: 'Patient Z-Scores',
                        data: [
                            { x: 13, y: 0.8 },
                            { x: 18, y: 1.2 },
                            { x: 21, y: 0.9 }
                        ],
                        backgroundColor: 'rgba(54, 162, 235, 1)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        pointRadius: 6,
                        pointHoverRadius: 8
                    },
                    {
                        label: 'High Risk Threshold',
                        data: [
                            { x: 12, y: 3 },
                            { x: 22, y: 3 }
                        ],
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        pointRadius: 0,
                        type: 'line'
                    },
                    {
                        label: 'Low Risk Threshold',
                        data: [
                            { x: 12, y: -3 },
                            { x: 22, y: -3 }
                        ],
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        pointRadius: 0,
                        type: 'line'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Chromosome'
                        },
                        min: 12,
                        max: 22
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Z-Score'
                        },
                        min: -4,
                        max: 4
                    }
                },
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return `Chromosome ${context.parsed.x}: Z-Score ${context.parsed.y}`;
                            }
                        }
                    },
                    legend: {
                        display: true,
                        position: 'top'
                    }
                },
                annotation: {
                    annotations: {
                        box1: {
                            type: 'box',
                            xMin: 12,
                            xMax: 22,
                            yMin: -3,
                            yMax: 3,
                            backgroundColor: 'rgba(75, 192, 192, 0.1)',
                            borderColor: 'rgba(75, 192, 192, 0.2)'
                        }
                    }
                }
            }
        });
    </script>

    <!-- Additional features you might want to add: -->
    <script>
        // Function to export chart as image
        function exportChart() {
            const url = zScoreChart.toBase64Image();
            const link = document.createElement('a');
            link.download = 'z-score-chart.png';
            link.href = url;
            link.click();
        }

        // Function to update chart data
        function updateChartData(newData) {
            zScoreChart.data.datasets[0].data = newData;
            zScoreChart.update();
        }

        // Function to toggle different view modes
        function toggleChartView(mode) {
            // Implementation for different view modes
            // (e.g., linear, logarithmic, normalized)
        }
    </script>
</body>
</html>